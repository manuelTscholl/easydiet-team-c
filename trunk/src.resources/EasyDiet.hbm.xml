<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                                   "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="at.easydiet.model">
 <class name="Gender">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="FamilyStatus">
  <meta attribute="is-enum">true</meta>
  <id column="Status" name="status" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="Illness">
  <id column="IllnessId" name="illnessId" type="long">
   <generator class="native"/>
  </id>
  <property generated="never" lazy="false" name="Name" not-null="true" type="string"/>
 </class>
 <class name="Patient">
  <id column="PatientId" name="patientId" type="long">
   <generator class="native"/>
  </id>
  <property column="InsuranceNumber" generated="never" lazy="false"
   name="insuranceNumber" type="string"/>
  <property column="Forename" generated="never" lazy="false"
   name="forename" not-null="true" type="string"/>
  <property column="Lastname" generated="never" lazy="false"
   name="lastname" not-null="true" type="string"/>
  <property column="Username" generated="never" lazy="false"
   name="username" type="string"/>
  <property column="Password" generated="never" lazy="false"
   name="password" type="string"/>
  <property column="Title" generated="never" lazy="false" name="title" type="string"/>
  <property column="Street" generated="never" lazy="false" name="street" type="string"/>
  <property column="Zip" generated="never" lazy="false" name="zip" type="string"/>
  <property column="Place" generated="never" lazy="false" name="place" type="string"/>
  <!-- ISO 3166 ALPHA-3 -->
  <property column="Country" generated="never" lazy="false"
   name="country" type="string"/>
  <property column="Birthday" generated="never" lazy="false"
   name="birthday" type="timestamp"/>
  <property column="Job" generated="never" lazy="false" name="job" type="string"/>
  <property column="Religion" generated="never" lazy="false"
   name="religion" type="string"/>
  <property column="Regime" generated="never" lazy="false" name="regime" type="clob"/>
  <property column="Notice" generated="never" lazy="false" name="notice" type="clob"/>
  <many-to-one class="Gender" column="Gender" name="gender" not-null="true"/>
  <!-- Standard: ledig -->
  <many-to-one class="FamilyStatus" column="FamilyStatus"
   name="familyStatus" not-null="false"/>
  <set name="illnesses" sort="unsorted" table="PatientIllness">
   <key column="PatientId" not-null="true"/>
   <many-to-many class="Illness" column="IllnessId" unique="false"/>
  </set>
  <set cascade="all,delete-orphan" lazy="true" name="familyanamnesis" sort="unsorted">
   <key column="PatientId" not-null="true"/>
   <one-to-many class="FamilyAnamnesis"/>
  </set>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="patientStates" sort="unsorted">
   <key column="PatientId" not-null="true"/>
   <one-to-many class="PatientState"/>
  </set>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="laborReports" sort="unsorted">
   <key column="PatientId" not-null="true"/>
   <one-to-many class="LaborReport"/>
  </set>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="treatments" sort="unsorted">
   <key column="PatientId"/>
   <one-to-many class="DietTreatment"/>
  </set>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="likes" sort="unsorted">
   <key column="PatientId"/>
   <one-to-many class="PatientLike"/>
  </set>
 </class>
 <class name="PatientLike">
  <id column="PatientLikeId" name="patientLikeId" type="long">
   <generator class="native"/>
  </id>
  <!-- Bidirectional assoc to patient -->
  <many-to-one class="Patient" column="PatientId" name="patient" not-null="true"/>
  <property column="BlsPattern" generated="never" lazy="false"
   name="blsPattern" not-null="true" type="string"/>
  <many-to-one class="PatientLikeGrade" column="Grade" name="grade" not-null="true"/>
  <property column="Notice" generated="never" lazy="false" name="notice" type="string"/>
 </class>
 <class name="PatientLikeGrade">
  <id column="PatientLikeGradeId" name="patientLikeGradeId" type="long"/>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string"/>
 </class>
 <class name="FamilyAnamnesis">
  <id column="FamilyAnamnesisId" name="familyAnamnesisId" type="long">
   <generator class="native"/>
  </id>
  <property column="Person" generated="never" lazy="false" name="person"
   not-null="true" type="string"/>
  <set cascade="all,delete-orphan" name="illnesses" sort="unsorted" table="FamilyAnamnesisIllness">
   <key column="FamilyAnamnesisId" not-null="true"/>
   <many-to-many class="Illness" column="IllnessId" unique="false"/>
  </set>
 </class>
 <class name="SystemUser">
  <id column="SystemUserId" name="systemUserId" type="long">
   <generator class="native"/>
  </id>
  <property column="Username" generated="never" lazy="false"
   name="username" not-null="true" type="string" unique="true"/>
  <property column="Password" generated="never" lazy="false"
   name="password" not-null="true" type="string"/>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string"/>
  <property column="Email" generated="never" lazy="false" name="email"
   not-null="true" type="string" unique="true"/>
  <property column="DirectDial" generated="never" lazy="false"
   name="directDial" type="string"/>
  <property column="Department" generated="never" lazy="false"
   name="department" type="string"/>
  <property column="Job" generated="never" lazy="false" name="job" type="string"/>
  <!-- No Lazy loading: we often will need the user rights, so it's good we have them always -->
  <set name="rights" sort="unsorted" table="SystemUserRight">
   <key column="SystemUserId" not-null="true"/>
   <many-to-many class="UserRight" column="UserRightId" unique="false"/>
  </set>
 </class>
 <class name="UserRight">
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="ContactJournal">
  <id column="ContactJournalId" name="contactJournalId" type="long">
   <generator class="native"/>
  </id>
  <property column="Date" generated="never" lazy="false" name="date"
   not-null="true" type="timestamp"/>
  <property column="Description" generated="never" lazy="false"
   name="description" type="clob"/>
  <many-to-one class="SystemUser" column="CreatedBy" name="createdBy" not-null="true"/>
  <many-to-one class="ContactType" column="ContactType"
   name="contactType" not-null="true"/>
  <!-- Bidirectional assoc to treatment -->
  <many-to-one class="DietTreatment" column="DietTreatmentId"
   name="dietTreatment" not-null="true"/>
 </class>
 <class name="ContactType">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="ParameterDefinition">
  <id column="ParameterDefinitionId" name="parameterDefinitionId" type="long">
   <generator class="native"/>
  </id>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string" unique="true"/>
  <property column="CheckPattern" generated="never" lazy="false"
   name="checkPattern" type="string"/>
  <!-- No lazy loading, we will need units always -->
  <set lazy="true" name="units" sort="unsorted" table="ParameterDefinitionUnits">
   <key column="ParameterDefinitionId" not-null="true"/>
   <many-to-many class="ParameterDefinitionUnit"
    column="ParameterDefinitionUnitId" unique="false"/>
  </set>
 </class>
 <class name="ParameterDefinitionDataType">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="ParameterDefinitionUnit">
  <id column="ParameterDefinitionUnitId"
   name="parameterDefinitionUnitId" type="long">
   <generator class="native"/>
  </id>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string" unique="true"/>
  <many-to-one class="ParameterDefinitionDataType" column="Type"
   name="type" not-null="true"/>
 </class>
 <class name="DietTreatment">
  <id column="DietTreatmentId" name="dietTreatmentId" type="long">
   <generator class="native"/>
  </id>
  <property column="Start" generated="never" lazy="false" name="start"
   not-null="true" type="timestamp"/>
  <property column="Duration" generated="never" lazy="false"
   name="duration" not-null="true" type="int"/>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string"/>
  <property column="ShortDescription" generated="never" lazy="false"
   name="shortDescription" type="string"/>
  <set inverse="true" lazy="true" name="nutritionProtocols" sort="unsorted">
   <key column="DietTreatmentId" not-null="true"/>
   <one-to-many class="NutritionProtocol"/>
  </set>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="dietPlans" sort="unsorted">
   <key column="DietTreatmentId"/>
   <one-to-many class="DietPlan"/>
  </set>
  <set cascade="all,delete-orphan" lazy="true" name="dietParameters"
   sort="unsorted" table="DietTreatmentDietParameter">
   <key column="DietTreatmentId" not-null="true"/>
   <many-to-many class="DietParameter" column="DietParameterId" unique="true"/>
  </set>
  <set lazy="true" name="patientStates" sort="unsorted" table="DietTreatmentPatientState">
   <key column="DietTreatmentId" not-null="true"/>
   <many-to-many class="PatientState" column="PatientStateId" unique="false"/>
  </set>
  <set lazy="true" name="systemUsers" sort="unsorted">
   <key column="DietTreatmentId" not-null="true"/>
   <one-to-many class="DietTreatmentSystemUser"/>
  </set>
  <set inverse="true" lazy="true" name="contactJournals" sort="unsorted">
   <key column="DietTreatmentId" not-null="true"/>
   <one-to-many class="ContactJournal"/>
  </set>
  <many-to-one class="TreatmentState" column="TreatmentState"
   name="treatmentState" not-null="true"/>
  <!-- Not needed, Templates are DietTreatments without a patient assigned		
		<joined-subclass name="DietTreatmentTemplate">
			<key column="DietTreatmentId" />
		</joined-subclass>
 Bidirectional assoc to patient -->
  <many-to-one class="Patient" column="PatientId" name="patient" not-null="true"/>
 </class>
 <class name="DietTreatmentSystemUser">
  <id column="DietTreatmentSystemUserId"
   name="dietTreatmentSystemUserId" type="long">
   <generator class="native"/>
  </id>
  <many-to-one class="SystemUser" column="SystemUserId"
   name="systemUser" not-null="true"/>
  <many-to-one class="SystemUserFunction" column="Function"
   name="function" not-null="true"/>
 </class>
 <class name="SystemUserFunction">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="TreatmentState">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="DietPlan">
  <id column="DietPlanId" name="dietPlanId" type="long">
   <generator class="native"/>
  </id>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string"/>
  <property column="CreatedOn" generated="never" lazy="false"
   name="createdOn" not-null="true" type="timestamp"/>
  <many-to-one class="PlanType" column="PlanType" name="planType" not-null="true"/>
  <!-- Bidirectional assoc to treatment -->
  <many-to-one class="DietTreatment" column="DietTreatmentId"
   name="dietTreatment" not-null="false"/>
  <set cascade="all,delete-orphan" lazy="true" name="dietParameters"
   sort="unsorted" table="DietPlanDietParameter">
   <key column="DietPlanId" not-null="true"/>
   <many-to-many class="DietParameter" column="DietParameterId" unique="true"/>
  </set>
  <many-to-one class="SystemUser" column="Creator" name="creator" not-null="true"/>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="timeSpans" sort="unsorted">
   <key column="DietPlanId" not-null="true"/>
   <one-to-many class="TimeSpan"/>
  </set>
  <joined-subclass name="NutritionProtocol">
   <key column="DietPlanId"/>
   <property column="Date" generated="never" lazy="false" name="date"
    not-null="true" type="timestamp"/>
   <property column="Contact" generated="never" lazy="false"
    name="contact" type="string"/>
   <property column="Notice" generated="never" lazy="false"
    name="notice" type="clob"/>
  </joined-subclass>
 </class>
 <class name="PlanType">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="TimeSpan">
  <id column="TimeSpanId" name="timeSpanId" type="long">
   <generator class="native"/>
  </id>
  <property column="Start" generated="never" lazy="false" name="start"
   not-null="true" type="timestamp"/>
  <property column="Duration" generated="never" lazy="false"
   name="duration" not-null="true" type="int"/>
  <!-- Bidirectional assoc to plan -->
  <many-to-one class="DietPlan" column="DietPlanId" name="dietPlan" not-null="true"/>
  <set cascade="all,delete-orphan" lazy="true" name="dietParameters"
   sort="unsorted" table="TimeSpanDietParameter">
   <key column="TimeSpanId" not-null="true"/>
   <many-to-many class="DietParameter" column="DietParameterId" unique="true"/>
  </set>
  <list cascade="all,delete-orphan" name="meals">
   <key column="TimeSpanId" not-null="true"/>
   <index column="Idx"/>
   <one-to-many class="Meal"/>
  </list>
 </class>
 <class name="Meal">
  <id column="MealId" name="mealId" type="long">
   <generator class="native"/>
  </id>
  <property column="Code" generated="never" lazy="false" name="code"
   not-null="true" type="string"/>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string"/>
  <!-- Bidirectional assoc to timespan -->
  <many-to-one class="TimeSpan" column="TimeSpanId" insert="false"
   name="timeSpan" not-null="true" update="false"/>
  <set cascade="all,delete-orphan" lazy="true" name="dietParameters"
   sort="unsorted" table="MealDietParameter">
   <key column="MealId" not-null="true"/>
   <many-to-many class="DietParameter" column="DietParameterId" unique="true"/>
  </set>
  <list cascade="all,delete-orphan" name="mealLines">
   <key column="MealId" not-null="true"/>
   <index column="Idx"/>
   <one-to-many class="MealLine"/>
  </list>
 </class>
 <class name="MealLine">
  <id column="MealLineId" name="mealLineId" type="long">
   <generator class="native"/>
  </id>
  <property column="Quantity" generated="never" lazy="false"
   name="quantity" not-null="true" type="float"/>
  <property column="Info" generated="never" lazy="false" name="info" type="clob"/>
  <list cascade="all" name="alternatives">
   <key column="ParentMealLineId"/>
   <index column="Idx"/>
   <one-to-many class="MealLine"/>
  </list>
  <many-to-one class="Recipe" name="recipe" not-null="true"/>
  <many-to-one class="ParameterDefinitionUnit" name="unit" not-null="true"/>
  <!-- Bidirectional assoc to parent mealLine -->
  <many-to-one class="MealLine" column="ParentMealLineId" name="parent"/>
  <!-- Bidirectional assoc to meal -->
  <many-to-one class="Meal" column="MealId" insert="false" name="meal"
   not-null="true" update="false"/>
 </class>
 <class name="Recipe">
  <id column="RecipeId" name="recipeId" type="long">
   <generator class="native"/>
  </id>
  <property column="Name" generated="never" lazy="false" name="name" type="string"/>
  <property column="BlsCode" generated="never" lazy="false"
   name="blsCode" type="string"/>
  <property column="Difficulty" generated="never" lazy="false"
   name="difficulty" not-null="true" type="int"/>
  <property column="Description" generated="never" lazy="false"
   name="description" type="clob"/>
  <property column="Benefits" generated="never" lazy="false"
   name="benefits" type="clob"/>
  <property column="CookInstructions" generated="never" lazy="false"
   name="cookInstructions" type="clob"/>
  <!-- Used for NutrimentParameter calculations -->
  <property column="Amount" generated="never" lazy="false" name="amount" type="float"/>
  <many-to-one class="ParameterDefinitionUnit"
   column="ParameterDefinitionUnitId" name="unit"/>
  <set cascade="all,delete-orphan" inverse="true" lazy="true"
   name="ingredients" sort="unsorted">
   <key column="RecipeId" not-null="true"/>
   <one-to-many class="RecipeIngredient"/>
  </set>
  <set cascade="all,delete-orphan" lazy="true"
   name="nutrimentParameters" sort="unsorted">
   <key column="RecipeId" not-null="true"/>
   <one-to-many class="NutrimentParameter"/>
  </set>
 </class>
 <class name="RecipeIngredient">
  <id column="RecipeIngredientId" name="recipeIngredientId" type="long">
   <generator class="native"/>
  </id>
  <!-- Used for NutrimentParameter assignemnts -->
  <property column="Amount" generated="never" lazy="false" name="amount" type="float"/>
  <many-to-one class="Recipe" column="IngredientId" name="ingredient"/>
  <!-- Bidirectional assoc to recipe -->
  <many-to-one class="Recipe" column="RecipeId" name="recipe" not-null="true"/>
 </class>
 <class name="NutrimentParameter">
  <id column="NutrimentParameterId" name="nutrimentParameterId" type="long">
   <generator class="native"/>
  </id>
  <property column="Value" generated="never" lazy="false" name="value"
   not-null="true" type="string"/>
  <many-to-one class="ParameterDefinition"
   column="ParameterDefinitionId" name="parameterDefinition" not-null="true"/>
  <many-to-one class="ParameterDefinitionUnit"
   column="ParameterDefinitionUnitId" name="unit"/>
 </class>
 <class name="PatientStateType">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="PatientState">
  <id column="PatientStateId" name="patientStateId" type="long">
   <generator class="native"/>
  </id>
  <property column="Date" generated="never" lazy="false" name="date"
   not-null="true" type="timestamp"/>
  <property column="Anamnesis" generated="never" lazy="false"
   name="anamnesis" type="clob"/>
  <property column="Weight" generated="never" lazy="false" name="weight" type="int"/>
  <property column="WeightPercentile" generated="never" lazy="false"
   name="weightPercentile" type="float"/>
  <property column="Height" generated="never" lazy="false" name="height" type="int"/>
  <property column="HeightPercentile" generated="never" lazy="false"
   name="heightPercentile" type="float"/>
  <property column="Compliance" generated="never" lazy="false"
   name="compliance" type="int"/>
  <property column="Motivation" generated="never" lazy="false"
   name="motivation" type="int"/>
  <many-to-one class="PatientStateType" column="Type" name="type" not-null="true"/>
  <many-to-one class="SystemUser" column="SystemUserId" name="creator" not-null="true"/>
  <set lazy="true" name="laborReports" sort="unsorted" table="PatientStateLaborReports">
   <key column="PatientStateId" not-null="true"/>
   <many-to-many class="LaborReport" column="LaborReportId" unique="false"/>
  </set>
  <set lazy="true" name="dietTreatments" sort="unsorted" table="DietTreatmentPatientState">
   <key column="PatientStateId" not-null="false"/>
   <many-to-many class="DietTreatment" column="DietTreatmentId" unique="false"/>
  </set>
  <!-- Bidirectional assoc to patient -->
  <many-to-one class="Patient" column="PatientId" name="patient" not-null="true"/>
 </class>
 <class name="LaborReport">
  <id column="LaborReportId" name="laborReportId" type="long">
   <generator class="native"/>
  </id>
  <property column="Date" generated="never" lazy="false" name="date"
   not-null="true" type="timestamp"/>
  <property column="Notice" generated="never" lazy="false" name="notice" type="clob"/>
  <many-to-one class="SystemUser" column="Creator" name="creator" not-null="true"/>
  <set cascade="all,delete-orphan" inverse="true" name="laborParameters" sort="unsorted">
   <key column="LaborReportId" not-null="true"/>
   <one-to-many class="LaborParameter"/>
  </set>
  <many-to-one class="LaborReportType" column="LaborReportTypeId" name="laborReportType"/>
  <!-- Bidirectional assoc to patient -->
  <many-to-one class="Patient" column="PatientId" name="patient" not-null="true"/>
 </class>
 <class name="LaborParameter">
  <id column="LaborParameterId" name="laborParameterId" type="long">
   <generator class="native"/>
  </id>
  <property generated="never" lazy="false" name="Value" not-null="true" type="string"/>
  <many-to-one class="ParameterDefinitionUnit"
   column="ParameterDefinitionUnitId" name="parameterDefinitionUnit" not-null="true"/>
  <many-to-one class="CheckOperator" column="CheckOperatorId"
   name="checkOperator" not-null="true"/>
  <many-to-one class="ParameterDefinition"
   column="ParameterDefinitionId" name="parameterDefinition" not-null="true"/>
  <many-to-one class="LaborReport" column="LaborReportId" name="laborReport"/>
 </class>
 <class name="LaborReportType">
  <id column="LaborReportTypeId" name="laborReportTypeId" type="long">
   <generator class="native"/>
  </id>
  <property generated="never" lazy="false" name="Name" not-null="true" type="string"/>
  <set lazy="true" name="parameterDefinitions" sort="unsorted" table="LaborReportTypeParameterDefinition">
   <key column="LaborReportTypeId" not-null="true"/>
   <many-to-many class="ParameterDefinition"
    column="ParameterDefinitionId" unique="true"/>
  </set>
 </class>
 <class name="DietParameterTemplate">
  <id column="DietParameterTemplateId" name="dietParameterTemplateId" type="long">
   <generator class="native"/>
  </id>
  <many-to-one class="CheckOperator" column="CheckOperator"
   name="checkOperator" not-null="true"/>
  <property column="Duration" generated="never" lazy="false"
   name="duration" type="int"/>
  <property column="Value" generated="never" lazy="false" name="value" type="string"/>
  <many-to-one class="ParameterDefinitionUnit"
   column="ParameterDefinitionUnitId" name="parameterDefinitionUnit" not-null="true"/>
  <many-to-one class="DietParameterType" column="DietParameterType"
   name="dietParameterType" not-null="true"/>
  <many-to-one class="ParameterDefinition"
   column="ParameterDefinitionId" name="parameterDefinition" not-null="true"/>
  <!-- Bidirectional assoc to set -->
  <many-to-one class="DietParameterSet" column="DietParameterSetId" name="dietParameterSet"/>
  <joined-subclass name="DietParameter">
   <key column="DietParameterTemplateId" not-null="true"/>
   <property column="Start" generated="never" lazy="false" name="start" type="timestamp"/>
  </joined-subclass>
 </class>
 <class name="CheckOperator">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
 <class name="DietParameterSet">
  <id column="DietParameterSetId" name="dietParameterSetId" type="long">
   <generator class="native"/>
  </id>
  <property column="Name" generated="never" lazy="false" name="name"
   not-null="true" type="string" unique="true"/>
  <set cascade="all,delete-orphan" lazy="true"
   name="dietParameterTemplates" sort="unsorted">
   <key column="DietParameterSetId"/>
   <one-to-many class="DietParameterTemplate"/>
  </set>
 </class>
 <class name="DietParameterType">
  <meta attribute="is-enum">true</meta>
  <id column="Name" name="name" type="string">
   <meta attribute="use-in-tostring">true</meta>
  </id>
 </class>
</hibernate-mapping>
